diff --git a/lib/xmlparse.c b/lib/xmlparse.c
--- a/lib/xmlparse.c
+++ b/lib/xmlparse.c
@@ -3125,12 +3125,20 @@
 }
 #endif /* XML_GE == 1 */

-#ifdef MOZILLA_CLIENT /* Report opening tag of mismatched closing tag */
+#ifdef MOZILLA_CLIENT
+/* Report opening tag of mismatched closing tag */
 const XML_Char * XMLCALL
 MOZ_XML_GetMismatchedTag(XML_Parser parser)
 {
   return parser->m_mismatch;
 }
+
+/* Report whether the parser is currently expanding an entity */
+XML_Bool XMLCALL
+MOZ_XML_ProcessingEntityValue(XML_Parser parser)
+{
+  return parser->m_openInternalEntities != NULL;
+}
 #endif

 XML_Bool XMLCALL
